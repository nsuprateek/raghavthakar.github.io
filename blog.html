<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
    <title>Raghav Thakar</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="icon" type="image/x-icon" href="img/profile4.png">
</head>

<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html"><img src="img/profile4.png" alt=""></a></li>
                <br>
                <li><a href="index.html">&#8592;Home</a></li>
            </ul>
        </nav>
    </header>


    <h1>Blog</h1>

    <ul id="blog-posts-list"></ul>
    
    <script>
        const fs = require('fs');
        const path = require('path');

        const blogPostsFolder = "blogs/posts-html/";
            // let title = document.getElementById('blog-content').querySelectorAll('h1')[0].textcontent
        fs.readdir(blogPostsFolder, (err, files) => {
            if (err) {
                console.error('Error reading directory:', err);
                return;
            }
            files.forEach((file) => {
                const filePath = path.join(folderPath, file);

                if (path.extname(file) === '.html') {
                // Read the HTML content from the file
                    const htmlContent = fs.readFileSync(filePath, 'utf-8');

                    // Parse the HTML content
                    const { DOMParser } = require('jsdom');
                    const dom = new DOMParser().parseFromString(htmlContent, 'text/html');

                    // Now, you can access and manipulate the DOM
                    title = dom.getElementById('blog-content').querySelectorAll('h1')[0].textcontent;
                    // const titleElement = dom.querySelector('title');
                    // const title = titleElement ? titleElement.textContent : 'No title found';

                    console.log('Title:', title);
                }
            });

        });

        document.addEventListener("DOMContentLoaded", function () {
        // Reference the 'blog-post-list' ul element where we want to display the links
        const blogPostList = document.getElementById("blog-post-list");

        // Define the path to the 'blog-posts' folder
        // const blogPostsFolder = "blogs/posts-html/";

        
        

        // Fetch the list of files in the 'blog-posts' folder
        fetch(blogPostsFolder)
            .then(response => response.text())
            .then(data => {
                // Parse the directory listing HTML using DOMParser
                const parser = new DOMParser();
                const doc = parser.parseFromString(data, "text/html");
                const links = doc.querySelectorAll("a");

                console.log(links);

                // Iterate through the links and create list items with hyperlinks
                links.forEach(link => {
                    const li = document.createElement("li");
                    const a = document.createElement("a");
                    a.href = blogPostsFolder + link.getAttribute("href");
                    a.textContent = link.textContent;
                    li.appendChild(a);
                    blogPostList.appendChild(li);
                });
            })
            .catch(error => {
                console.error("Error fetching and listing blog posts:", error);
            });
        });

    </script>
       
    <footer style="text-align: center;">
        <p id="last-modified"></p>
        <script>
            const date = new Date(document.lastModified);
            document.getElementById("last-modified").innerHTML = "Last modified: "+date;
        </script>
        <a href="https://madewithlove.org.in/" target="_blank" rel="noopener noreferrer">Made with ðŸ’© in India</a>
    </footer>
</body>

</html>
